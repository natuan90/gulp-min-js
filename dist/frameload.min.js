!function(e,r){var n=r(document),t=function(r){e.console&&console.log(r)},a=document.location.hostname,o="";"localhost"!=a&&"192.168.33.10"!=a||(o="https://www.skygate.co.jp");var f={},m={},i=function(e){var n={},t=e.frameId,a=e.frameKey;if(t){if(f[t])return f[t];if(-1===t.indexOf(",")){var i=r.ajax(o+"/common/frame?frameId="+t,{cache:!1});return f[t]=i,i}n.frameIds=_.map(t.split(","),function(e){return r.trim(e)})}else{if(!a)return r.Deferred().reject();if(m[a])return m[a];if(-1===a.indexOf(",")){i=r.ajax(o+"/common/frame?frameKey="+a,{cache:!1});return m[a]=i,i}n.frameKeys=_.map(a.split(","),function(e){return r.trim(e)})}return u(n)},u=function(e){var n,t=e.frameIds,a=e.frameKeys,o=r.Deferred();if(t)n=_.map(t,function(e){return i({frameId:e})});else{if(!a)return o.reject();n=_.map(a,function(e){return i({frameKey:e})})}return r.when.apply(r,n).done(function(e){var r=Array.prototype.slice.call(arguments),n=t||a,f=_.reduce(n,function(e,n,t){return e[n]=r[t][0],e},{});o.resolve({results:f})}),o.promise()},c={},d={},s=function(){return _.reduce(r(".frameItem"),function(e,a){var o=r.Deferred(),f=r(a),m=f.attr("data-frameid"),u=f.attr("data-framekey"),s=f.attr("data-framename");if(s&&!(m=c[s]))return t("frameName: "+s+" is undefined"),void o.resolve();if(!m&&!u)return t("frameId and frameKey are undefined"),void o.resolve();var l={};return m?l.frameId=m:l.frameKey=u,i(l).done(function(e){if(!e)return n.trigger("loadFrameItem",{frameData:e,targetElement:a}),void o.resolve();var t,m=f.attr("data-template"),i=d[m];i||(i=_.template((t=(t=(t=r("#"+m).html()||"").split("\r\n").join("\n")).split("\r").join("\n"),_.map(t.split("\n"),function(e){return r.trim(e)}).join(""))),d[m]=i),f.append(i(e)),n.trigger("loadFrameItem",{frameData:e,targetElement:a}),o.resolve()}),e.push(o.promise()),e},[])};r(function(){var e=_.reduce(r("input[name=metaFrameIds]"),function(e,n){var t=i({frameId:n.value}).done(function(e){e.content&&e.content.metaFrameIds&&r.extend(c,e.content.metaFrameIds)});return e.push(t),e},[]);r.when.apply(r,e).done(function(){var e=s();r.when.apply(r,e).done(function(){_.each(_.keys(d),function(e){r("#"+e).remove()})})})})}(window,jQuery);