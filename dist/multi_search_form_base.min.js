!function(e,t){skygate.util.format,skygate.util.startsWith;var r,n=(r=0,function(){return r++}),a=Backbone.Model.extend({defaults:{prefix:""},initialize:function(e){var t=n()+"_";e.saveKeyPrefix&&(t=e.saveKeyPrefix+"_"+t),this.set("prefix",t)},getTabIndexKey:function(){return this.createContainerId()+"_"+location.host+location.pathname},saveTabIndex:function(t){var r=e.sessionStorage;if(!r)return!1;try{r.setItem(this.getTabIndexKey(),t)}catch(e){return!1}return!0},getSavedTabIndex:function(t){var r=e.sessionStorage;if(r)try{return+r.getItem(this.getTabIndexKey())}catch(e){return}},createContainerId:function(){return this.get("prefix")+"msf"}}),i=Backbone.Model.extend({errorMessage:{required:"{0}が指定されていません。",invalidDate:"{0}は存在しない日付です。",samePlace:"出発地とは異なる場所を選択してください。"},getSearchConditionKey:function(e){return e+"_"+location.host+location.pathname},saveCondition:function(t,r){var n=e.sessionStorage;if(!n)return!1;var a="_AnH_sp.skygate.co.jp/dp/",i=this.getSearchConditionKey(t);try{if(n.setItem(i,JSON.stringify(r)),"spairform_sp.skygate.co.jp/"===i){var o=n.getItem(a)?n.getItem(a):"{}",s=JSON.parse(o);s.AgentCode="SPHPA",s.arrival||(s.arrival=r.arrival?r.arrival:r.departure),s.departure=r.departure,s.destination=r.destinations&&r.destinations.length>0?r.destinations[0]:"",s.fromDate=r.fromDate?r.fromDate.replace(/\//g,""):"",s.toDate=r.toDates&&r.toDates.length>0?r.toDates[r.toDates.length-1].replace(/\//g,""):this.getToDate(s.fromDate).replace(/\//g,"");var u=r.minorAges?","+r.minorAges.join():"";s.rooms=r.adultNum+u,n.setItem(a,JSON.stringify(s))}}catch(e){return!1}return!0},getSavedCondition:function(r){var n=e.sessionStorage;if(n)try{var a=n.getItem(this.getSearchConditionKey(r));if(a)return t.parseJSON(a)}catch(e){return}},normalizeDateString:function(e){if(!e)return e;if(-1===(e=_.reduce(["・","／","･"],function(e,t){return e.split(t).join("/")},e)).indexOf("/"))return e;var t=e.split("/"),r=t[1],n=t[2];return r&&1===r.length&&(r="0"+r),n&&1===n.length&&(n="0"+n),[t[0],r,n].join("/").replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}}),o=skygate.util.namespace("airlink.model.common.multi_search_form");o.FormContainerModel=a,o.MultiSearchFormBaseModel=i}(window,jQuery);