!function(e,t){skygate.util.format,skygate.util.startsWith;var r,a=(r=0,function(){return r++}),n=Backbone.Model.extend({defaults:{prefix:""},initialize:function(e){var t=a()+"_";e.saveKeyPrefix&&(t=e.saveKeyPrefix+"_"+t),this.set("prefix",t)},getTabIndexKey:function(){return this.createContainerId()+"_"+location.host+location.pathname},saveTabIndex:function(t){var r=e.sessionStorage;if(!r)return!1;try{r.setItem(this.getTabIndexKey(),t)}catch(e){return!1}return!0},getSavedTabIndex:function(t){var r=e.sessionStorage;if(r)try{return+r.getItem(this.getTabIndexKey())}catch(e){return}},createContainerId:function(){return this.get("prefix")+"msf"}}),i=Backbone.Model.extend({errorMessage:{required:"{0}が指定されていません。",invalidDate:"{0}は存在しない日付です。"},getSearchConditionKey:function(e){return e+"_"+location.host+location.pathname},saveCondition:function(t,r){var a=e.sessionStorage;if(!a)return!1;var n=["0_msf_air_www.skygate.co.jp/","0_msf_air_www.skygate.co.jp/hotel/","0_msf_air_www.skygate.co.jp/dp/"],i=["0_msf_a+h_www.skygate.co.jp/","0_msf_a+h_www.skygate.co.jp/hotel/","0_msf_a+h_www.skygate.co.jp/dp/"],o=this.getSearchConditionKey(t);try{n.includes(o)&&(n.forEach(function(e){if(e!==o){var t=a.getItem(e)?a.getItem(e):"{}",n=JSON.parse(t);n.arrival=r.arrival,n.searchKind=r.searchKind,n.departureKind=r.departureKind,n.departure=r.departure,n.destinations=r.destinations,n.fromDate=r.fromDate,n.toDates=r.toDates,n.adultNum=r.adultNum,n.minorAges=r.minorAges,a.setItem(e,JSON.stringify(n))}}),i.forEach(function(e){var t,n,i,o=a.getItem(e)?a.getItem(e):"{}",s=JSON.parse(o);if(s.arrival=r.arrival,s.departure=r.departure,s.destination=r.destinations[0],s.fromDate=r.fromDate,s.arrivalLabel=r.arrivalLabel,s.departureLabel=r.departureLabel,s.destinationLabel=r.destinationLabel,s.toDate=r.toDates&&r.toDates.length>0?r.toDates[r.toDates.length-1]:"",!s.toDate){var u=new Date(r.fromDate);u.setDate(u.getDate()+3),s.toDate=(n=(t=u).getMonth()+1,i=t.getDate(),[t.getFullYear(),(n>9?"":"0")+n,(i>9?"":"0")+i].join("/"))}s.roomSettings=[];var d=new Object;d.adultNum=r.adultNum,d.minorAges=r.minorAges?r.minorAges.map(Number):[],s.roomSettings.push(d),a.setItem(e,JSON.stringify(s))})),i.includes(o)&&(i.forEach(function(e){if(e!==o){var t=a.getItem(e)?a.getItem(e):"{}",n=JSON.parse(t);n.arrival=r.arrival,n.arrivalLabel=r.arrivalLabel,n.departure=r.departure,n.departureLabel=r.departureLabel,n.destination=r.destination,n.destinationLabel=r.destinationLabel,n.fromDate=r.fromDate,n.toDate=r.toDate,n.roomSettings=r.roomSettings,a.setItem(e,JSON.stringify(n))}}),n.forEach(function(e){var t=a.getItem(e)?a.getItem(e):"{}",n=JSON.parse(t);n.searchKind=t.searchKind?t.searchKind:0,n.arrival=r.arrival,n.departure=r.departure,n.destinations=[],n.destinations.push(r.destination),n.fromDate=r.fromDate,n.toDates=[],n.toDates.push(r.toDate),n.adultNum=r.roomSettings.map(function(e){return e.adultNum}).reduce(function(e,t){return e+t}),n.minorAges=r.roomSettings.map(function(e){return e.minorAges}).reduce(function(e,t){return e.concat(t)}),a.setItem(e,JSON.stringify(n))})),a.setItem(o,JSON.stringify(r))}catch(e){return!1}return!0},getSavedCondition:function(r){var a=e.sessionStorage;if(a)try{var n=a.getItem(this.getSearchConditionKey(r));if(n)return t.parseJSON(n)}catch(e){return}},normalizeDateString:function(e){if(!e)return e;if(-1===(e=_.reduce(["・","／","･"],function(e,t){return e.split(t).join("/")},e)).indexOf("/"))return e;var t=e.split("/"),r=t[1],a=t[2];r&&1===r.length&&(r="0"+r),a&&1===a.length&&(a="0"+a);var n=[t[0],r];return a&&n.push(a),n.join("/").replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}}),o=skygate.util.namespace("airlink.model.common.ui_integration_multi_search_form");o.FormContainerModel=n,o.MultiSearchFormBaseModel=i}(window,jQuery);