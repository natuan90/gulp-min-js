!function(n){"function"==typeof require&&"undefined"!=typeof module&&module.exports?module.exports=n(require("underscore")):"function"==typeof define?define(["underscore"],n):this.Cocktail=n(_)}(function(n){var i,e={};return e.mixins={},e.mixin=function(i){var t=n.chain(arguments).toArray().rest().flatten().value(),o=i.prototype||i,r={};return n(t).each(function(i){n.isString(i)&&(i=e.mixins[i]),n(i).each(function(i,e){if(n.isFunction(i)){if(o[e]===i)return;o[e]&&(r[e]=r[e]||[o[e]],r[e].push(i)),o[e]=i}else n.isArray(i)?o[e]=n.union(i,o[e]||[]):n.isObject(i)?o[e]=n.extend({},i,o[e]||{}):e in o||(o[e]=i)})}),n(r).each(function(i,e){o[e]=function(){var e,t=this,o=arguments;return n(i).each(function(i){var r=n.isFunction(i)?i.apply(t,o):i;e=void 0===r?e:r}),e}}),i},e.patch=function(t){i=t.Model.extend;var o=function(n,t){var o=i.call(this,n,t),r=o.prototype.mixins;return r&&o.prototype.hasOwnProperty("mixins")&&e.mixin(o,r),o};n([t.Model,t.Collection,t.Router,t.View]).each(function(i){i.mixin=function(){e.mixin(this,n.toArray(arguments))},i.extend=o})},e.unpatch=function(e){n([e.Model,e.Collection,e.Router,e.View]).each(function(n){n.mixin=void 0,n.extend=i})},e});