"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,o,r,i,a,u=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)a[n]=str(n,c)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(r=str(o=rep[n],c))&&a.push(quote(o)+(gap?": ":":")+r);else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(r=str(o,c))&&a.push(quote(o)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var o;if(indent=gap="","number"==typeof n)for(o=0;o<n;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var n,o,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(o=walk(r,n))?r[n]=o:delete r[n]);return reviver.call(t,e,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t){"use strict";var e,n=t.Base64;"undefined"!=typeof module&&module.exports&&(e=require("buffer").Buffer);var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(t){for(var e={},n=0,o=t.length;n<o;n++)e[t.charAt(n)]=n;return e}(o),i=String.fromCharCode,a=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?i(192|e>>>6)+i(128|63&e):i(224|e>>>12&15)+i(128|e>>>6&63)+i(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return i(240|e>>>18&7)+i(128|e>>>12&63)+i(128|e>>>6&63)+i(128|63&e)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(t){return t.replace(u,a)},s=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),2<=e?"=":o.charAt(n>>>6&63),1<=e?"=":o.charAt(63&n)].join("")},l=t.btoa?function(e){return t.btoa(e)}:function(t){return t.replace(/[\s\S]{1,3}/g,s)},f=e?function(t){return(t.constructor===e.constructor?t:new e(t)).toString("base64")}:function(t){return l(c(t))},d=function(t,e){return e?f(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):f(String(t))},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return i(55296+(e>>>10))+i(56320+(1023&e));case 3:return i((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return i((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},h=function(t){return t.replace(p,g)},y=function(t){var e=t.length,n=e%4,o=(0<e?r[t.charAt(0)]<<18:0)|(1<e?r[t.charAt(1)]<<12:0)|(2<e?r[t.charAt(2)]<<6:0)|(3<e?r[t.charAt(3)]:0),a=[i(o>>>16),i(o>>>8&255),i(255&o)];return a.length-=[0,0,2,1][n],a.join("")},m=t.atob?function(e){return t.atob(e)}:function(t){return t.replace(/[\s\S]{1,4}/g,y)},b=e?function(t){return(t.constructor===e.constructor?t:new e(t,"base64")).toString()}:function(t){return h(m(t))},v=function(t){return b(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(t.Base64={VERSION:"2.1.8",atob:m,btoa:l,fromBase64:v,toBase64:d,utob:c,encode:d,encodeURI:function(t){return d(t,!0)},btou:h,decode:v,noConflict:function(){var e=t.Base64;return t.Base64=n,e}},"function"==typeof Object.defineProperty){var A=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",A(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",A(function(t){return d(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",A(function(){return d(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(this),function(t){var e=t(document),n=function(t,e){e(t);var n,o,r=e(document),i="/common/redirect_auth_check?",a=function(t,n,o,r,a,u){if(t&&n){o||(o=0),r||(r="POST"),u||(u=i);var c={action:t,method:r};e.extend(!0,c,n);var s=JSON.stringify(c),l=Base64.encode(s),f=a||"";return"https://"+location.host+f+u+e.param({rq:l,allowAutoLogin:o})}},u=navigator.userAgent,c=!!u.match(/iPhone/i),s=!!u.match(/android/i),l=!!u.match(/Windows Phone/i),f=!!u.match(/Chrome/i)||!!u.match(/CrMo/)||!!u.match(/CriOS/),d=s&&!!u.match(/Safari/i)&&!f;if(c||l||d&&u.match(/Mobile/)&&!u.match(/SC-01C/)||s&&f&&u.match(/Mobile/)||u.match(/Fennec/i)||u.match(/Opera Mobi/i)||"function"==typeof history.pushState||"https:"===location.protocol)n=function(t){return"https:"!==location.protocol&&(t.crossDomain=!0,t.xhrFields={withCredentials:!0}),e.ajax(t)};else{var p=void 0===t.addEventListener&&void 0===document.querySelectorAll,g="https://"+location.host,h="authCorsProxyIFrame",y=(o=!1,r.on("corsReadyEvent",function(){o=!0}),{queue:[],deferredMap:{},executeTimer:!1,TIMER_WAIT:200,flush:function(){for(var t;t=this.queue.shift();)t()},timer:function(){var t=this;setTimeout(function(){t.isReady()?t.flush():t.timer()},this.TIMER_WAIT)},isReady:function(){return o},execute:function(t){var e=this.deferredMap[t.id];delete this.deferredMap[t.id],t.status?e.resolve(t.response):e.reject()},enqueue:function(t){var n=e.Deferred();if(p)return n.reject(),n.promise();var o,r=(o=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o(),i=function(){document.getElementById(h).contentWindow.postMessage(JSON.stringify({ajaxOption:t,id:r}),g)};return this.deferredMap[r]=n,this.isReady()?i():(this.queue.push(i),this.executeTimer||(this.executeTimer=!0,this.timer())),n.promise()}});n=function(t){return y.enqueue.apply(y,arguments)},e(function(){if(!e("#"+h).length){e(t).on("message",function(t){if(-1!==t.originalEvent.origin.indexOf(g)){var n=t.originalEvent.data;if("corsReady"===n)r.trigger("corsReadyEvent");else if(n){var o=e.parseJSON(n);o.id&&y.execute(o)}}});var n=g+"/common/cors_proxy";e("body").append('<iframe id="'+h+'" src="'+n+'" style="display: none;"></iframe>')}})}skygate=t.skygate||{},skygate.util=t.skygate.util||{},skygate.util.isAuOne=t.skygate.util.isAuOne||function(){var t=!1;return-1!=location.host.indexOf("autravel.auone")&&(t=!0),t},skygate.util.createRedirectAuthPath=t.skygate.util.createRedirectAuthPath||function(t,e,n,o,r){return a(t,e,n,o,"",r)},skygate.util.createRedirectAuthPathWithPrefix=t.skygate.util.createRedirectAuthPathWithPrefix||a,skygate.util.callAuthApi=t.skygate.util.callAuthApi||n,skygate.util.date=t.skygate.util.date||{},skygate.util.date.ymdStringToObject=t.skygate.util.date.ymdStringToObject||function(t){if(!t)return null;if(6===t.length)return this.ymStringToObject(t);if(8!==t.length)return null;var e=t.substring(0,4),n=t.substring(4,6),o=t.substring(6,8);return new Date(e,parseInt(n,10)-1,parseInt(o,10))},skygate.util.redirectAuthCheckUrl=t.skygate.util.redirectAuthCheckUrl||i,skygate.util.redirectMypageCheckUrl=t.skygate.util.redirectMypageCheckUrl||"/common/redirect_mypage_check?",skygate.util.redirectMypageLoginUrl=t.skygate.util.redirectMypageLoginUrl||"/common/auth/login_mypage";var m=function(e){t.ga&&!skygate.util.isAuOne()&&(t.ga("set","dimension1",e),t.ga("set","nonInteraction",!0),t.ga("send","event"))},b=function(o){var r=e(document),i=(e(this),e("#str-header")),a="https://"+location.host+"/common/api/authentication/authCheck",u="https://"+location.host+"/common/api/authentication/logout",c={loginUrl:"https://"+location.host+"/common/login?",logoutButton:null,showBoxButton:null,closeButton:null,loginButton:null,onAutoLogin:function(t){i.addClass("login"),this._renderPoint(t.point),this._renderCoupon(t.couponNumber,t.couponExpiration),this._renderMenuItem(!0,t.memberExistedSites)},onNormalLogin:function(t){this.onAutoLogin(t),this.renderPointInfo(t)},onTempLogin:function(t){i.addClass("login"),this._renderMenuItem(!1,t.memberExistedSites)},onLoginError:function(){i.removeClass("login")},preAuthticate:function(t){},onAuthticationSuccessed:function(t){},onCloseMenuBox:function(t){},onDocumentClick:function(t){},onOpenMenuBox:function(){},preLogout:function(){this._renderPoint("")},postLogout:function(){},renderPointInfo:function(t){this._renderPoint(t.point),this._renderCoupon(t.couponNumber,t.couponExpiration)},_renderPoint:function(t){t||0==t?(e(".point.user_accumulated_points",".header-logo").text(t+"P"),e(".text-l.user_accumulated_points",".navSlide").text(t),e(".header-point",".header-logo").children("#loadingWrap").hide(),e("li.point").find("#loadingWrap").css("display","none"),9<=t.length&&e(".user_accumulated_points.point",".header-logo").addClass("text-s"),e(".header-point",".header-logo").children("p").show(),e(".header-point",".header-logo").show()):e(".header-point",".header-logo").hide()},_renderCoupon:function(t,n){var o=0;t&&(o=t),e("#mypage-coupon").find(".coupon-num").text(o),e("#mypage-coupon").show()},_renderReservationItemCount:function(t){var n=0;t&&(n=t),e(".text-info",".reserve","navSlide").children("b").text(n)},_renderPackageDiscount:function(){e(".sethotel","#str-header,.navSlide").show()},_hasCrossSellApplicablePeriods:function(t){if(!t||!t.length)return!1;var n=(new Date).getTime(),o=!1;return e.each(t,function(t,e){if(n<=skygate.util.date.ymdStringToObject(e.startDate).getTime()&&(0===e.itineraryType||(1===e.itineraryType||2===e.itineraryType)&&e.startDate<e.endDate))return!(o=!0)}),o},_renderMenuItem:function(t,n){t||-1!==e.inArray("AT",n)?(e(".at-menu-item").show(),e(".ea-menu-item").hide()):-1!==e.inArray("EA",n)&&(e(".ea-menu-item").show(),e(".at-menu-item").hide())}};return this.each(function(i,s){var l=e(s),f=l.attr("data-initialized"),d=l.attr("data-reload");if(f&&!d)return!0;l.attr("data-initialized",1);var p=e.extend(c,o);return n({url:a,cache:!1,type:"POST",dataType:"json"}).done(function(e){e.status.success?"0"===e.loginType?(p.onAutoLogin(e),p.preAuthticate({login:!0}),p.onAuthticationSuccessed(e),m("auto")):"1"===e.loginType?(p.onNormalLogin(e),p.preAuthticate({login:!0}),p.onAuthticationSuccessed(e),m("normal")):e.memberExistedSites&&0<e.memberExistedSites.length?(p.onTempLogin(e),p.preAuthticate({login:!0})):(p.onLoginError(),setTimeout(function(){p.preAuthticate({login:!1})},2e3),m("not")):(p.onLoginError(),setTimeout(function(){p.preAuthticate({login:!1})},2e3),m("not")),t.jQuery(document).trigger("AutoLoginCompleted",e)}).fail(function(){p.onLoginError(),setTimeout(function(){p.preAuthticate({login:!1})},2e3),t.jQuery(document).trigger("AutoLoginFailed")}),d||(r.click(function(t){p.onDocumentClick(t)}),p.closeButton&&p.closeButton.click(function(t){p.onCloseMenuBox(t)}),p.showBoxButton&&p.showBoxButton.click(function(t){t.preventDefault(),p.onOpenMenuBox.apply(t.currentTarget)}),p.logoutButton.click(function(o){o.preventDefault(),p.preLogout(),e(".header-point",".header-logo").hide(),p.logoutButton.attr("data-action-url")?p.postLogout():n({url:u,cache:!1,type:"POST",dataType:"json"}).always(function(){p.postLogout(),t.jQuery(document).trigger("AutoLoginLogout")})}),p.loginButton.click(function(t){t.preventDefault(),location.href=p.loginUrl+e.param({redirect:location.href})}),null!=p.refreshButton&&p.refreshButton.click(function(t){e("li.point").find(".text-info").css("display","none"),e("li.point").find("#loadingWrap").css("display","inline-block"),n({url:a,cache:!1,type:"POST",data:{pointRefresh:1},dataType:"json"}).done(function(t){p._renderPoint(t.point),e("li.point").find(".text-info").css("display","inline"),e("li.point").find(".text-s").css("display","block"),e("li.point").find("#loadingWrap").css("display","none")})})),!0})};jQuery.fn.autoLogin=b,e.fn.autoLogin=b};skygate=window.skygate||{},skygate.util=window.skygate.util||{};var o=!1;skygate.util.autoLoginReady=function(t){o?t():e.bind("AutoLoginInitialized",function(){t()})},jQuery.fn.on&&jQuery.Deferred?(n(window,jQuery),o=!0):t.getScript("//s.skygate.co.jp/js/lib/jquery_pc.js",function(){var r=jQuery.noConflict();window.jQuery=t,n(window,r),o=!0,e.trigger("AutoLoginInitialized")}),t(function(){t(".global-tab-menu li").click(function(){var e=t(".global-tab-menu li").index(this);t(".global-tab-items").removeClass("active"),t(".global-tab-items").eq(e).addClass("active"),t(".global-tab-menu li").removeClass("active"),t(this).addClass("active")})})}(jQuery);