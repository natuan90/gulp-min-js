!function(t,e){var a=skygate.util.format,i=airlink.model.common.ui_integration_multi_search_form,r=Backbone.View.extend({events:{"click .place":"showCityModal","click .recommendOption":"onSelectOption","click .btn-close-01":"hideModal","click .js-btn-set":"clearInput","keyup .place":"showOrHideClearanceButton"},initialize:function(t){this.$modalCity=this.$el.find(".modal-city-popular"),this.initRecommendCityTable(t.optionData);var a=this;e("body").mouseup(function(t){var e=a.$modalCity;e.is(t.target)||0!==e.has(t.target).length||e.hide()})},initRecommendCityTable:function(t){var a=_.template(e("#recommnedCityTableTemplate").html());this.$el.find(".recommendCityTable").html(a({domesticCities:t.recommendCityList.domestic||[],abroadCities:t.recommendCityList.abroad||[],isDepature:t.isDeparture,isStopover:t.isStopover}))},onSelectOption:function(t){var a=e(t.currentTarget),i=a.data("threeLetter"),r=a.data("cityName"),n=e(t.currentTarget).closest(".input-text-base").find("input.place");n.val(r),n.attr("data-cityCode",i),n.attr("data-suggestLabel",r),this.hideModal(),e(t.currentTarget).closest(".input-text-base").find(".err-text-01").hide(),n.trigger("keyup"),e(t.currentTarget).closest(".input-text-base").find(".modal-city-popular").hide()},clearInput:function(t){var a=e(t.currentTarget).closest(".input-text-base").find("input.place");a.val(""),a.attr("data-cityCode",""),a.attr("data-suggestLabel",""),a.trigger("click"),a.focus(),e(t.currentTarget).hide()},showCityModal:function(t){var a=e(t.currentTarget).attr("data-citycode");a?(e(".str-search .list-area-01 > li").removeClass("selected"),e('*[data-three-letter="'+a+'"]').closest(".str-search .list-area-01 > li").addClass("selected")):e(".str-search .list-area-01 > li").removeClass("selected"),e(t.currentTarget).closest(".input-text-base").find(".modal-city-popular").show(),e(t.currentTarget).closest(".input-text-base").find(".err-text-01").hide()},hideModal:function(){this.$el.find(".set-departure").hide()},createSuggestionCityName:function(t,e,i,r,n){var s=e?a("（{0}, {1}）",t,e):a("（{0}）",t),o=a("{0}, {1}",i,r);return{cityCountryName:o,cityCountryNameWithKeyword:a("{0}{1}",s,o).replace(new RegExp(n,"gm"),a("<b>{0}</b>",n))}},showOrHideClearanceButton:function(t){e(t.currentTarget).val().length>0?e(t.currentTarget).closest(".input-text-base").find(".js-btn-set").show():e(t.currentTarget).closest(".input-text-base").find(".js-btn-set").hide()}});i.CityModalView=r}(window,jQuery);