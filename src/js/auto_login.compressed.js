"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,o,r,i,a,u=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)a[n]=str(n,c)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(r=str(o=rep[n],c))&&a.push(quote(o)+(gap?": ":":")+r);else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(r=str(o,c))&&a.push(quote(o)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var o;if(indent=gap="","number"==typeof n)for(o=0;o<n;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var n,o,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(o=walk(r,n))?r[n]=o:delete r[n]);return reviver.call(t,e,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){"use strict";var n,o=e.Base64;"undefined"!=typeof module&&module.exports&&(n=require("buffer").Buffer);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){for(var e={},n=0,o=t.length;n<o;n++)e[t.charAt(n)]=n;return e}(r),a=String.fromCharCode,u=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?a(192|e>>>6)+a(128|63&e):a(224|e>>>12&15)+a(128|e>>>6&63)+a(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|e>>>18&7)+a(128|e>>>12&63)+a(128|e>>>6&63)+a(128|63&e)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(t){return t.replace(c,u)},l=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),2<=e?"=":r.charAt(n>>>6&63),1<=e?"=":r.charAt(63&n)].join("")},f=e.btoa?function(t){return e.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,l)},d=n?function(t){return(t.constructor===n.constructor?t:new n(t)).toString("base64")}:function(t){return f(s(t))},p=function(t,e){return e?d(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):d(String(t))},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),h=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return a(55296+(e>>>10))+a(56320+(1023&e));case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},y=function(t){return t.replace(g,h)},m=function(t){var e=t.length,n=e%4,o=(0<e?i[t.charAt(0)]<<18:0)|(1<e?i[t.charAt(1)]<<12:0)|(2<e?i[t.charAt(2)]<<6:0)|(3<e?i[t.charAt(3)]:0),r=[a(o>>>16),a(o>>>8&255),a(255&o)];return r.length-=[0,0,2,1][n],r.join("")},b=e.atob?function(t){return e.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,m)},v=n?function(t){return(t.constructor===n.constructor?t:new n(t,"base64")).toString()}:function(t){return y(b(t))},t=function(t){return v(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(e.Base64={VERSION:"2.1.8",atob:b,btoa:f,fromBase64:t,toBase64:p,utob:s,encode:p,encodeURI:function(t){return p(t,!0)},btou:y,decode:t,noConflict:function(){var t=e.Base64;return e.Base64=o,t}},"function"==typeof Object.defineProperty){var A=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",A(function(){return t(this)})),Object.defineProperty(String.prototype,"toBase64",A(function(t){return p(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",A(function(){return p(this,!0)}))}}e.Meteor&&(Base64=e.Base64)}(this),function(e){var n=e(document),o=function(f,d){d(f);var p,t,o=d(document),l="/common/redirect_auth_check?",i=function(t,e,n,o,r,i){if(t&&e){n||(n=0),o||(o="POST"),i||(i=l);var a={action:t,method:o};d.extend(!0,a,e);var u=JSON.stringify(a),c=Base64.encode(u),s=r||"";return"https://"+location.host+s+i+d.param({rq:c,allowAutoLogin:n})}},e=navigator.userAgent,n=!!e.match(/iPhone/i),r=!!e.match(/android/i),a=!!e.match(/Windows Phone/i),u=!!e.match(/Chrome/i)||!!e.match(/CrMo/)||!!e.match(/CriOS/),c=r&&!!e.match(/Safari/i)&&!u;if(!(!!(n||a||c&&e.match(/Mobile/)&&!e.match(/SC-01C/)||r&&u&&e.match(/Mobile/)||e.match(/Fennec/i)||e.match(/Opera Mobi/i))||"function"==typeof history.pushState||"https:"===location.protocol)){var s=void 0===f.addEventListener&&void 0===document.querySelectorAll,g="https://"+location.host,h="authCorsProxyIFrame",y=(t=!1,o.on("corsReadyEvent",function(){t=!0}),{queue:[],deferredMap:{},executeTimer:!1,TIMER_WAIT:200,flush:function(){for(var t;t=this.queue.shift();)t()},timer:function(){var t=this;setTimeout(function(){t.isReady()?t.flush():t.timer()},this.TIMER_WAIT)},isReady:function(){return t},execute:function(t){var e=this.deferredMap[t.id];delete this.deferredMap[t.id],t.status?e.resolve(t.response):e.reject()},enqueue:function(t){var e=d.Deferred();if(s)return e.reject(),e.promise();var n,o=(n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n(),r=function(){document.getElementById(h).contentWindow.postMessage(JSON.stringify({ajaxOption:t,id:o}),g)};return this.deferredMap[o]=e,this.isReady()?r():(this.queue.push(r),this.executeTimer||(this.executeTimer=!0,this.timer())),e.promise()}});p=function(t){return y.enqueue.apply(y,arguments)},d(function(){if(!d("#"+h).length){d(f).on("message",function(t){if(-1!==t.originalEvent.origin.indexOf(g)){var e=t.originalEvent.data;if("corsReady"===e)o.trigger("corsReadyEvent");else if(e){var n=d.parseJSON(e);n.id&&y.execute(n)}}});var t=g+"/common/cors_proxy";d("body").append('<iframe id="'+h+'" src="'+t+'" style="display: none;"></iframe>')}})}else p=function(t){return"https:"!==location.protocol&&(t.crossDomain=!0,t.xhrFields={withCredentials:!0}),d.ajax(t)};skygate=f.skygate||{},skygate.util=f.skygate.util||{},skygate.util.isAuOne=f.skygate.util.isAuOne||function(){var t=!1;return-1!=location.host.indexOf("autravel.auone")&&(t=!0),t},skygate.util.createRedirectAuthPath=f.skygate.util.createRedirectAuthPath||function(t,e,n,o,r){return i(t,e,n,o,"",r)},skygate.util.createRedirectAuthPathWithPrefix=f.skygate.util.createRedirectAuthPathWithPrefix||i,skygate.util.callAuthApi=f.skygate.util.callAuthApi||p,skygate.util.date=f.skygate.util.date||{},skygate.util.date.ymdStringToObject=f.skygate.util.date.ymdStringToObject||function(t){if(!t)return null;if(6===t.length)return this.ymStringToObject(t);if(8!==t.length)return null;var e=t.substring(0,4),n=t.substring(4,6),o=t.substring(6,8);return new Date(e,parseInt(n,10)-1,parseInt(o,10))},skygate.util.redirectAuthCheckUrl=f.skygate.util.redirectAuthCheckUrl||l,skygate.util.redirectMypageCheckUrl=f.skygate.util.redirectMypageCheckUrl||"/common/redirect_mypage_check?",skygate.util.redirectMypageLoginUrl=f.skygate.util.redirectMypageLoginUrl||"/common/auth/login_mypage";var m=function(t){f.ga&&!skygate.util.isAuOne()&&(f.ga("set","dimension1",t),f.ga("set","nonInteraction",!0),f.ga("send","event"))},b=function(a){var u=d(document),e=(d(this),d("#str-header")),c="https://"+location.host+"/common/api/authentication/authCheck",s="https://"+location.host+"/common/api/authentication/logout",l={loginUrl:"https://"+location.host+"/common/login?",logoutButton:null,showBoxButton:null,closeButton:null,loginButton:null,onAutoLogin:function(t){e.addClass("login"),this._renderPoint(t.point),this._renderCoupon(t.couponNumber,t.couponExpiration),this._renderMenuItem(!0,t.memberExistedSites)},onNormalLogin:function(t){this.onAutoLogin(t),this.renderPointInfo(t)},onTempLogin:function(t){e.addClass("login"),this._renderMenuItem(!1,t.memberExistedSites)},onLoginError:function(){e.removeClass("login")},preAuthticate:function(t){},onAuthticationSuccessed:function(t){},onCloseMenuBox:function(t){},onDocumentClick:function(t){},onOpenMenuBox:function(){},preLogout:function(){this._renderPoint("")},postLogout:function(){},renderPointInfo:function(t){this._renderPoint(t.point),this._renderCoupon(t.couponNumber,t.couponExpiration)},_renderPoint:function(t){t||0==t?(d(".point.user_accumulated_points",".header-logo").text(t+"P"),d(".text-l.user_accumulated_points",".navSlide").text(t),d(".header-point",".header-logo").children("#loadingWrap").hide(),d("li.point").find("#loadingWrap").css("display","none"),9<=t.length&&d(".user_accumulated_points.point",".header-logo").addClass("text-s"),d(".header-point",".header-logo").children("p").show(),d(".header-point",".header-logo").show()):d(".header-point",".header-logo").hide()},_renderCoupon:function(t,e){var n=0;t&&(n=t),d("#mypage-coupon").find(".coupon-num").text(n),d("#mypage-coupon").show()},_renderReservationItemCount:function(t){var e=0;t&&(e=t),d(".text-info",".reserve","navSlide").children("b").text(e)},_renderPackageDiscount:function(){d(".sethotel","#str-header,.navSlide").show()},_hasCrossSellApplicablePeriods:function(t){if(!t||!t.length)return!1;var n=0,o=1,r=2,i=(new Date).getTime(),a=!1;return d.each(t,function(t,e){if(i<=skygate.util.date.ymdStringToObject(e.startDate).getTime()&&(e.itineraryType===n||(e.itineraryType===o||e.itineraryType===r)&&e.startDate<e.endDate))return!(a=!0)}),a},_renderMenuItem:function(t,e){t||-1!==d.inArray("AT",e)?(d(".at-menu-item").show(),d(".ea-menu-item").hide()):-1!==d.inArray("EA",e)&&(d(".ea-menu-item").show(),d(".at-menu-item").hide())}};return this.each(function(t,e){var n=d(e),o=n.attr("data-initialized"),r=n.attr("data-reload");if(o&&!r)return!0;n.attr("data-initialized",1);var i=d.extend(l,a);return p({url:c,cache:!1,type:"POST",dataType:"json"}).done(function(t){t.status.success?"0"===t.loginType?(i.onAutoLogin(t),i.preAuthticate({login:!0}),i.onAuthticationSuccessed(t),m("auto")):"1"===t.loginType?(i.onNormalLogin(t),i.preAuthticate({login:!0}),i.onAuthticationSuccessed(t),m("normal")):t.memberExistedSites&&0<t.memberExistedSites.length?(i.onTempLogin(t),i.preAuthticate({login:!0})):(i.onLoginError(),setTimeout(function(){i.preAuthticate({login:!1})},2e3),m("not")):(i.onLoginError(),setTimeout(function(){i.preAuthticate({login:!1})},2e3),m("not")),f.jQuery(document).trigger("AutoLoginCompleted",t)}).fail(function(){i.onLoginError(),setTimeout(function(){i.preAuthticate({login:!1})},2e3),f.jQuery(document).trigger("AutoLoginFailed")}),r||(u.click(function(t){i.onDocumentClick(t)}),i.closeButton&&i.closeButton.click(function(t){i.onCloseMenuBox(t)}),i.showBoxButton&&i.showBoxButton.click(function(t){t.preventDefault(),i.onOpenMenuBox.apply(t.currentTarget)}),i.logoutButton.click(function(t){(t.preventDefault(),i.preLogout(),d(".header-point",".header-logo").hide(),i.logoutButton.attr("data-action-url"))?i.postLogout():p({url:s,cache:!1,type:"POST",dataType:"json"}).always(function(){i.postLogout(),f.jQuery(document).trigger("AutoLoginLogout")})}),i.loginButton.click(function(t){t.preventDefault(),location.href=i.loginUrl+d.param({redirect:location.href})}),null!=i.refreshButton&&i.refreshButton.click(function(t){d("li.point").find(".text-info").css("display","none"),d("li.point").find("#loadingWrap").css("display","inline-block"),p({url:c,cache:!1,type:"POST",data:{pointRefresh:1},dataType:"json"}).done(function(t){i._renderPoint(t.point),d("li.point").find(".text-info").css("display","inline"),d("li.point").find(".text-s").css("display","block"),d("li.point").find("#loadingWrap").css("display","none")})})),!0})};jQuery.fn.autoLogin=b,d.fn.autoLogin=b};skygate=window.skygate||{},skygate.util=window.skygate.util||{};var r=!1;skygate.util.autoLoginReady=function(t){r?t():n.bind("AutoLoginInitialized",function(){t()})},jQuery.fn.on&&jQuery.Deferred?(o(window,jQuery),r=!0):e.getScript("//s.skygate.co.jp/js/lib/jquery_pc.js",function(){var t=jQuery.noConflict();window.jQuery=e,o(window,t),r=!0,n.trigger("AutoLoginInitialized")}),e(function(){e(".global-tab-menu li").click(function(){var t=e(".global-tab-menu li").index(this);e(".global-tab-items").removeClass("active"),e(".global-tab-items").eq(t).addClass("active"),e(".global-tab-menu li").removeClass("active"),e(this).addClass("active")})})}(jQuery);